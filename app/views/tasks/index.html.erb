<div class="card-body mb-4">
  <h3><b>Tasks To do: </b><span class="badge bg-<%= Task.badge_color %>"><%= Task.status %></span></h3>
  <p class="text-secondary mb-0"><%= Task.percent_done %>% Complete (<%= Task.completed %>/<%= Task.total %>) Tasks</p>
  <div class="progress">
    <div class="progress-bar bg-primary" role="progressbar" style="width: <%= Task.percent_done %>%" aria-valuenow="<%= Task.percent_done %>" aria-valuemin="0" aria-valuemax="100"></div>
  </div>
</div>

<table class="table table-bordered">
  <tbody>
    <% @tasks.each do |task| %>

      <% if task.done %>
        <tr class="table-secondary text-muted">
          <td><em><%= task.name %></em></td>
          <td><em><%= task.description %></em></td>
          <td>
            <center>
              <%= link_to "#", class: 'btn btn-primary', data: { reflex: 'click->Task#mark_incomplete', id: task.id } do %>
                <i class='fas fa-check'></i>
              <% end %>
            </center>
          </td>
          <td>
            <center>
              <%= link_to "Edit", edit_task_path(task), class: "btn btn-outline-secondary btn-sm" %>
            </center>
          </td>
          <td>
            <center>
              <%= link_to "Remove", task_path(task), class: "btn btn-outline-danger btn-sm", method: :delete, data: { confirm: "Are you sure?" } %>
            </center>
          </td>
        </tr>

      <% else %>

        <tr>
          <td><%= task.name %></td>
          <td><%= task.description %></td>
          <td>
            <center>
              <%= link_to "#", class: 'btn btn-dark', data: { reflex: 'click->Task#mark_complete', id: task.id } do %>
                <i class='fas fa-times'></i>
              <% end %>
            </center>
          </td>
          <td>
            <center>
              <%= link_to "Edit", edit_task_path(task), class: "btn btn-outline-secondary btn-sm" %>
            </center>
          </td>
          <td>
            <center>
              <%= link_to "Remove", task_path(task), class: "btn btn-outline-danger btn-sm", method: :delete, data: { confirm: "Are you sure?" } %>
            </center>
          </td>
        </tr>
      <% end %>

    <% end %>
  </tbody>
</table>

<p><%= link_to "Create a new task", new_task_path, class: "btn btn-outline-secondary btn-sm" %></p>
